use std::sync::OnceLock;


pub const ATTACKING_PAWNS: [[u64; 64]; 2] = [
    [ // Color 0: White (Squares a White pawn attacks FROM)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 0 (A1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 1 (B1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 2 (C1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 3 (D1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 4 (E1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 5 (F1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 6 (G1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 7 (H1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000010, // Target Square 8 (A2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000101, // Target Square 9 (B2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00001010, // Target Square 10 (C2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00010100, // Target Square 11 (D2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00101000, // Target Square 12 (E2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_01010000, // Target Square 13 (F2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_10100000, // Target Square 14 (G2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_01000000, // Target Square 15 (H2)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000010_00000000, // Target Square 16 (A3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000101_00000000, // Target Square 17 (B3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00001010_00000000, // Target Square 18 (C3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00010100_00000000, // Target Square 19 (D3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00101000_00000000, // Target Square 20 (E3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_01010000_00000000, // Target Square 21 (F3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_10100000_00000000, // Target Square 22 (G3)
        0b00000000_00000000_00000000_00000000_00000000_00000000_01000000_00000000, // Target Square 23 (H3)
        0b00000000_00000000_00000000_00000000_00000000_00000010_00000000_00000000, // Target Square 24 (A4)
        0b00000000_00000000_00000000_00000000_00000000_00000101_00000000_00000000, // Target Square 25 (B4)
        0b00000000_00000000_00000000_00000000_00000000_00001010_00000000_00000000, // Target Square 26 (C4)
        0b00000000_00000000_00000000_00000000_00000000_00010100_00000000_00000000, // Target Square 27 (D4)
        0b00000000_00000000_00000000_00000000_00000000_00101000_00000000_00000000, // Target Square 28 (E4)
        0b00000000_00000000_00000000_00000000_00000000_01010000_00000000_00000000, // Target Square 29 (F4)
        0b00000000_00000000_00000000_00000000_00000000_10100000_00000000_00000000, // Target Square 30 (G4)
        0b00000000_00000000_00000000_00000000_00000000_01000000_00000000_00000000, // Target Square 31 (H4)
        0b00000000_00000000_00000000_00000000_00000010_00000000_00000000_00000000, // Target Square 32 (A5)
        0b00000000_00000000_00000000_00000000_00000101_00000000_00000000_00000000, // Target Square 33 (B5)
        0b00000000_00000000_00000000_00000000_00001010_00000000_00000000_00000000, // Target Square 34 (C5)
        0b00000000_00000000_00000000_00000000_00010100_00000000_00000000_00000000, // Target Square 35 (D5)
        0b00000000_00000000_00000000_00000000_00101000_00000000_00000000_00000000, // Target Square 36 (E5)
        0b00000000_00000000_00000000_00000000_01010000_00000000_00000000_00000000, // Target Square 37 (F5)
        0b00000000_00000000_00000000_00000000_10100000_00000000_00000000_00000000, // Target Square 38 (G5)
        0b00000000_00000000_00000000_00000000_01000000_00000000_00000000_00000000, // Target Square 39 (H5)
        0b00000000_00000000_00000000_00000010_00000000_00000000_00000000_00000000, // Target Square 40 (A6)
        0b00000000_00000000_00000000_00000101_00000000_00000000_00000000_00000000, // Target Square 41 (B6)
        0b00000000_00000000_00000000_00001010_00000000_00000000_00000000_00000000, // Target Square 42 (C6)
        0b00000000_00000000_00000000_00010100_00000000_00000000_00000000_00000000, // Target Square 43 (D6)
        0b00000000_00000000_00000000_00101000_00000000_00000000_00000000_00000000, // Target Square 44 (E6)
        0b00000000_00000000_00000000_01010000_00000000_00000000_00000000_00000000, // Target Square 45 (F6)
        0b00000000_00000000_00000000_10100000_00000000_00000000_00000000_00000000, // Target Square 46 (G6)
        0b00000000_00000000_00000000_01000000_00000000_00000000_00000000_00000000, // Target Square 47 (H6)
        0b00000000_00000000_00000010_00000000_00000000_00000000_00000000_00000000, // Target Square 48 (A7)
        0b00000000_00000000_00000101_00000000_00000000_00000000_00000000_00000000, // Target Square 49 (B7)
        0b00000000_00000000_00001010_00000000_00000000_00000000_00000000_00000000, // Target Square 50 (C7)
        0b00000000_00000000_00010100_00000000_00000000_00000000_00000000_00000000, // Target Square 51 (D7)
        0b00000000_00000000_00101000_00000000_00000000_00000000_00000000_00000000, // Target Square 52 (E7)
        0b00000000_00000000_01010000_00000000_00000000_00000000_00000000_00000000, // Target Square 53 (F7)
        0b00000000_00000000_10100000_00000000_00000000_00000000_00000000_00000000, // Target Square 54 (G7)
        0b00000000_00000000_01000000_00000000_00000000_00000000_00000000_00000000, // Target Square 55 (H7)
        0b00000000_00000010_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 56 (A8)
        0b00000000_00000101_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 57 (B8)
        0b00000000_00001010_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 58 (C8)
        0b00000000_00010100_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 59 (D8)
        0b00000000_00101000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 60 (E8)
        0b00000000_01010000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 61 (F8)
        0b00000000_10100000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 62 (G8)
        0b00000000_01000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 63 (H8)
    ],
    [ // Color 1: Black (Squares a Black pawn attacks FROM)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000010_00000000, // Target Square 0 (A1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000101_00000000, // Target Square 1 (B1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00001010_00000000, // Target Square 2 (C1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00010100_00000000, // Target Square 3 (D1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00101000_00000000, // Target Square 4 (E1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_01010000_00000000, // Target Square 5 (F1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_10100000_00000000, // Target Square 6 (G1)
        0b00000000_00000000_00000000_00000000_00000000_00000000_01000000_00000000, // Target Square 7 (H1)
        0b00000000_00000000_00000000_00000000_00000000_00000010_00000000_00000000, // Target Square 8 (A2)
        0b00000000_00000000_00000000_00000000_00000000_00000101_00000000_00000000, // Target Square 9 (B2)
        0b00000000_00000000_00000000_00000000_00000000_00001010_00000000_00000000, // Target Square 10 (C2)
        0b00000000_00000000_00000000_00000000_00000000_00010100_00000000_00000000, // Target Square 11 (D2)
        0b00000000_00000000_00000000_00000000_00000000_00101000_00000000_00000000, // Target Square 12 (E2)
        0b00000000_00000000_00000000_00000000_00000000_01010000_00000000_00000000, // Target Square 13 (F2)
        0b00000000_00000000_00000000_00000000_00000000_10100000_00000000_00000000, // Target Square 14 (G2)
        0b00000000_00000000_00000000_00000000_00000000_01000000_00000000_00000000, // Target Square 15 (H2)
        0b00000000_00000000_00000000_00000000_00000010_00000000_00000000_00000000, // Target Square 16 (A3)
        0b00000000_00000000_00000000_00000000_00000101_00000000_00000000_00000000, // Target Square 17 (B3)
        0b00000000_00000000_00000000_00000000_00001010_00000000_00000000_00000000, // Target Square 18 (C3)
        0b00000000_00000000_00000000_00000000_00010100_00000000_00000000_00000000, // Target Square 19 (D3)
        0b00000000_00000000_00000000_00000000_00101000_00000000_00000000_00000000, // Target Square 20 (E3)
        0b00000000_00000000_00000000_00000000_01010000_00000000_00000000_00000000, // Target Square 21 (F3)
        0b00000000_00000000_00000000_00000000_10100000_00000000_00000000_00000000, // Target Square 22 (G3)
        0b00000000_00000000_00000000_00000000_01000000_00000000_00000000_00000000, // Target Square 23 (H3)
        0b00000000_00000000_00000000_00000010_00000000_00000000_00000000_00000000, // Target Square 24 (A4)
        0b00000000_00000000_00000000_00000101_00000000_00000000_00000000_00000000, // Target Square 25 (B4)
        0b00000000_00000000_00000000_00001010_00000000_00000000_00000000_00000000, // Target Square 26 (C4)
        0b00000000_00000000_00000000_00010100_00000000_00000000_00000000_00000000, // Target Square 27 (D4)
        0b00000000_00000000_00000000_00101000_00000000_00000000_00000000_00000000, // Target Square 28 (E4)
        0b00000000_00000000_00000000_01010000_00000000_00000000_00000000_00000000, // Target Square 29 (F4)
        0b00000000_00000000_00000000_10100000_00000000_00000000_00000000_00000000, // Target Square 30 (G4)
        0b00000000_00000000_00000000_01000000_00000000_00000000_00000000_00000000, // Target Square 31 (H4)
        0b00000000_00000000_00000010_00000000_00000000_00000000_00000000_00000000, // Target Square 32 (A5)
        0b00000000_00000000_00000101_00000000_00000000_00000000_00000000_00000000, // Target Square 33 (B5)
        0b00000000_00000000_00001010_00000000_00000000_00000000_00000000_00000000, // Target Square 34 (C5)
        0b00000000_00000000_00010100_00000000_00000000_00000000_00000000_00000000, // Target Square 35 (D5)
        0b00000000_00000000_00101000_00000000_00000000_00000000_00000000_00000000, // Target Square 36 (E5)
        0b00000000_00000000_01010000_00000000_00000000_00000000_00000000_00000000, // Target Square 37 (F5)
        0b00000000_00000000_10100000_00000000_00000000_00000000_00000000_00000000, // Target Square 38 (G5)
        0b00000000_00000000_01000000_00000000_00000000_00000000_00000000_00000000, // Target Square 39 (H5)
        0b00000000_00000010_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 40 (A6)
        0b00000000_00000101_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 41 (B6)
        0b00000000_00001010_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 42 (C6)
        0b00000000_00010100_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 43 (D6)
        0b00000000_00101000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 44 (E6)
        0b00000000_01010000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 45 (F6)
        0b00000000_10100000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 46 (G6)
        0b00000000_01000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 47 (H6)
        0b00000010_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 48 (A7)
        0b00000101_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 49 (B7)
        0b00001010_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 50 (C7)
        0b00010100_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 51 (D7)
        0b00101000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 52 (E7)
        0b01010000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 53 (F7)
        0b10100000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 54 (G7)
        0b01000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 55 (H7)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 56 (A8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 57 (B8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 58 (C8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 59 (D8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 60 (E8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 61 (F8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 62 (G8)
        0b00000000_00000000_00000000_00000000_00000000_00000000_00000000_00000000, // Target Square 63 (H8)
    ]
];

pub const KNIGHT_ATTACKS: [u64; 64] = [
    0b00000000_00000000_00000000_00000000_00000000_00000010_00000100_00000000, // Square 0 (A1)
    0b00000000_00000000_00000000_00000000_00000000_00000101_00001000_00000000, // Square 1 (B1)
    0b00000000_00000000_00000000_00000000_00000000_00001010_00010001_00000000, // Square 2 (C1)
    0b00000000_00000000_00000000_00000000_00000000_00010100_00100010_00000000, // Square 3 (D1)
    0b00000000_00000000_00000000_00000000_00000000_00101000_01000100_00000000, // Square 4 (E1)
    0b00000000_00000000_00000000_00000000_00000000_01010000_10001000_00000000, // Square 5 (F1)
    0b00000000_00000000_00000000_00000000_00000000_10100000_00010000_00000000, // Square 6 (G1)
    0b00000000_00000000_00000000_00000000_00000000_01000000_00100000_00000000, // Square 7 (H1)
    0b00000000_00000000_00000000_00000000_00000010_00000100_00000000_00000100, // Square 8 (A2)
    0b00000000_00000000_00000000_00000000_00000101_00001000_00000000_00001000, // Square 9 (B2)
    0b00000000_00000000_00000000_00000000_00001010_00010001_00000000_00010001, // Square 10 (C2)
    0b00000000_00000000_00000000_00000000_00010100_00100010_00000000_00100010, // Square 11 (D2)
    0b00000000_00000000_00000000_00000000_00101000_01000100_00000000_01000100, // Square 12 (E2)
    0b00000000_00000000_00000000_00000000_01010000_10001000_00000000_10001000, // Square 13 (F2)
    0b00000000_00000000_00000000_00000000_10100000_00010000_00000000_00010000, // Square 14 (G2)
    0b00000000_00000000_00000000_00000000_01000000_00100000_00000000_00100000, // Square 15 (H2)
    0b00000000_00000000_00000000_00000010_00000100_00000000_00000100_00000010, // Square 16 (A3)
    0b00000000_00000000_00000000_00000101_00001000_00000000_00001000_00000101, // Square 17 (B3)
    0b00000000_00000000_00000000_00001010_00010001_00000000_00010001_00001010, // Square 18 (C3)
    0b00000000_00000000_00000000_00010100_00100010_00000000_00100010_00010100, // Square 19 (D3)
    0b00000000_00000000_00000000_00101000_01000100_00000000_01000100_00101000, // Square 20 (E3)
    0b00000000_00000000_00000000_01010000_10001000_00000000_10001000_01010000, // Square 21 (F3)
    0b00000000_00000000_00000000_10100000_00010000_00000000_00010000_10100000, // Square 22 (G3)
    0b00000000_00000000_00000000_01000000_00100000_00000000_00100000_01000000, // Square 23 (H3)
    0b00000000_00000000_00000010_00000100_00000000_00000100_00000010_00000000, // Square 24 (A4)
    0b00000000_00000000_00000101_00001000_00000000_00001000_00000101_00000000, // Square 25 (B4)
    0b00000000_00000000_00001010_00010001_00000000_00010001_00001010_00000000, // Square 26 (C4)
    0b00000000_00000000_00010100_00100010_00000000_00100010_00010100_00000000, // Square 27 (D4)
    0b00000000_00000000_00101000_01000100_00000000_01000100_00101000_00000000, // Square 28 (E4)
    0b00000000_00000000_01010000_10001000_00000000_10001000_01010000_00000000, // Square 29 (F4)
    0b00000000_00000000_10100000_00010000_00000000_00010000_10100000_00000000, // Square 30 (G4)
    0b00000000_00000000_01000000_00100000_00000000_00100000_01000000_00000000, // Square 31 (H4)
    0b00000000_00000010_00000100_00000000_00000100_00000010_00000000_00000000, // Square 32 (A5)
    0b00000000_00000101_00001000_00000000_00001000_00000101_00000000_00000000, // Square 33 (B5)
    0b00000000_00001010_00010001_00000000_00010001_00001010_00000000_00000000, // Square 34 (C5)
    0b00000000_00010100_00100010_00000000_00100010_00010100_00000000_00000000, // Square 35 (D5)
    0b00000000_00101000_01000100_00000000_01000100_00101000_00000000_00000000, // Square 36 (E5)
    0b00000000_01010000_10001000_00000000_10001000_01010000_00000000_00000000, // Square 37 (F5)
    0b00000000_10100000_00010000_00000000_00010000_10100000_00000000_00000000, // Square 38 (G5)
    0b00000000_01000000_00100000_00000000_00100000_01000000_00000000_00000000, // Square 39 (H5)
    0b00000010_00000100_00000000_00000100_00000010_00000000_00000000_00000000, // Square 40 (A6)
    0b00000101_00001000_00000000_00001000_00000101_00000000_00000000_00000000, // Square 41 (B6)
    0b00001010_00010001_00000000_00010001_00001010_00000000_00000000_00000000, // Square 42 (C6)
    0b00010100_00100010_00000000_00100010_00010100_00000000_00000000_00000000, // Square 43 (D6)
    0b00101000_01000100_00000000_01000100_00101000_00000000_00000000_00000000, // Square 44 (E6)
    0b01010000_10001000_00000000_10001000_01010000_00000000_00000000_00000000, // Square 45 (F6)
    0b10100000_00010000_00000000_00010000_10100000_00000000_00000000_00000000, // Square 46 (G6)
    0b01000000_00100000_00000000_00100000_01000000_00000000_00000000_00000000, // Square 47 (H6)
    0b00000100_00000000_00000100_00000010_00000000_00000000_00000000_00000000, // Square 48 (A7)
    0b00001000_00000000_00001000_00000101_00000000_00000000_00000000_00000000, // Square 49 (B7)
    0b00010001_00000000_00010001_00001010_00000000_00000000_00000000_00000000, // Square 50 (C7)
    0b00100010_00000000_00100010_00010100_00000000_00000000_00000000_00000000, // Square 51 (D7)
    0b01000100_00000000_01000100_00101000_00000000_00000000_00000000_00000000, // Square 52 (E7)
    0b10001000_00000000_10001000_01010000_00000000_00000000_00000000_00000000, // Square 53 (F7)
    0b00010000_00000000_00010000_10100000_00000000_00000000_00000000_00000000, // Square 54 (G7)
    0b00100000_00000000_00100000_01000000_00000000_00000000_00000000_00000000, // Square 55 (H7)
    0b00000000_00000100_00000010_00000000_00000000_00000000_00000000_00000000, // Square 56 (A8)
    0b00000000_00001000_00000101_00000000_00000000_00000000_00000000_00000000, // Square 57 (B8)
    0b00000000_00010001_00001010_00000000_00000000_00000000_00000000_00000000, // Square 58 (C8)
    0b00000000_00100010_00010100_00000000_00000000_00000000_00000000_00000000, // Square 59 (D8)
    0b00000000_01000100_00101000_00000000_00000000_00000000_00000000_00000000, // Square 60 (E8)
    0b00000000_10001000_01010000_00000000_00000000_00000000_00000000_00000000, // Square 61 (F8)
    0b00000000_00010000_10100000_00000000_00000000_00000000_00000000_00000000, // Square 62 (G8)
    0b00000000_00100000_01000000_00000000_00000000_00000000_00000000_00000000, // Square 63 (H8)
];

pub const PREMASKS_ROOK: [u64; 64] = [
    0b00000000_00000001_00000001_00000001_00000001_00000001_00000001_01111110, // Square 0 (A1)
    0b00000000_00000010_00000010_00000010_00000010_00000010_00000010_01111100, // Square 1 (B1)
    0b00000000_00000100_00000100_00000100_00000100_00000100_00000100_01111010, // Square 2 (C1)
    0b00000000_00001000_00001000_00001000_00001000_00001000_00001000_01110110, // Square 3 (D1)
    0b00000000_00010000_00010000_00010000_00010000_00010000_00010000_01101110, // Square 4 (E1)
    0b00000000_00100000_00100000_00100000_00100000_00100000_00100000_01011110, // Square 5 (F1)
    0b00000000_01000000_01000000_01000000_01000000_01000000_01000000_00111110, // Square 6 (G1)
    0b00000000_10000000_10000000_10000000_10000000_10000000_10000000_01111110, // Square 7 (H1)
    0b00000000_00000001_00000001_00000001_00000001_00000001_01111110_00000000, // Square 8 (A2)
    0b00000000_00000010_00000010_00000010_00000010_00000010_01111100_00000000, // Square 9 (B2)
    0b00000000_00000100_00000100_00000100_00000100_00000100_01111010_00000000, // Square 10 (C2)
    0b00000000_00001000_00001000_00001000_00001000_00001000_01110110_00000000, // Square 11 (D2)
    0b00000000_00010000_00010000_00010000_00010000_00010000_01101110_00000000, // Square 12 (E2)
    0b00000000_00100000_00100000_00100000_00100000_00100000_01011110_00000000, // Square 13 (F2)
    0b00000000_01000000_01000000_01000000_01000000_01000000_00111110_00000000, // Square 14 (G2)
    0b00000000_10000000_10000000_10000000_10000000_10000000_01111110_00000000, // Square 15 (H2)
    0b00000000_00000001_00000001_00000001_00000001_01111110_00000001_00000000, // Square 16 (A3)
    0b00000000_00000010_00000010_00000010_00000010_01111100_00000010_00000000, // Square 17 (B3)
    0b00000000_00000100_00000100_00000100_00000100_01111010_00000100_00000000, // Square 18 (C3)
    0b00000000_00001000_00001000_00001000_00001000_01110110_00001000_00000000, // Square 19 (D3)
    0b00000000_00010000_00010000_00010000_00010000_01101110_00010000_00000000, // Square 20 (E3)
    0b00000000_00100000_00100000_00100000_00100000_01011110_00100000_00000000, // Square 21 (F3)
    0b00000000_01000000_01000000_01000000_01000000_00111110_01000000_00000000, // Square 22 (G3)
    0b00000000_10000000_10000000_10000000_10000000_01111110_10000000_00000000, // Square 23 (H3)
    0b00000000_00000001_00000001_00000001_01111110_00000001_00000001_00000000, // Square 24 (A4)
    0b00000000_00000010_00000010_00000010_01111100_00000010_00000010_00000000, // Square 25 (B4)
    0b00000000_00000100_00000100_00000100_01111010_00000100_00000100_00000000, // Square 26 (C4)
    0b00000000_00001000_00001000_00001000_01110110_00001000_00001000_00000000, // Square 27 (D4)
    0b00000000_00010000_00010000_00010000_01101110_00010000_00010000_00000000, // Square 28 (E4)
    0b00000000_00100000_00100000_00100000_01011110_00100000_00100000_00000000, // Square 29 (F4)
    0b00000000_01000000_01000000_01000000_00111110_01000000_01000000_00000000, // Square 30 (G4)
    0b00000000_10000000_10000000_10000000_01111110_10000000_10000000_00000000, // Square 31 (H4)
    0b00000000_00000001_00000001_01111110_00000001_00000001_00000001_00000000, // Square 32 (A5)
    0b00000000_00000010_00000010_01111100_00000010_00000010_00000010_00000000, // Square 33 (B5)
    0b00000000_00000100_00000100_01111010_00000100_00000100_00000100_00000000, // Square 34 (C5)
    0b00000000_00001000_00001000_01110110_00001000_00001000_00001000_00000000, // Square 35 (D5)
    0b00000000_00010000_00010000_01101110_00010000_00010000_00010000_00000000, // Square 36 (E5)
    0b00000000_00100000_00100000_01011110_00100000_00100000_00100000_00000000, // Square 37 (F5)
    0b00000000_01000000_01000000_00111110_01000000_01000000_01000000_00000000, // Square 38 (G5)
    0b00000000_10000000_10000000_01111110_10000000_10000000_10000000_00000000, // Square 39 (H5)
    0b00000000_00000001_01111110_00000001_00000001_00000001_00000001_00000000, // Square 40 (A6)
    0b00000000_00000010_01111100_00000010_00000010_00000010_00000010_00000000, // Square 41 (B6)
    0b00000000_00000100_01111010_00000100_00000100_00000100_00000100_00000000, // Square 42 (C6)
    0b00000000_00001000_01110110_00001000_00001000_00001000_00001000_00000000, // Square 43 (D6)
    0b00000000_00010000_01101110_00010000_00010000_00010000_00010000_00000000, // Square 44 (E6)
    0b00000000_00100000_01011110_00100000_00100000_00100000_00100000_00000000, // Square 45 (F6)
    0b00000000_01000000_00111110_01000000_01000000_01000000_01000000_00000000, // Square 46 (G6)
    0b00000000_10000000_01111110_10000000_10000000_10000000_10000000_00000000, // Square 47 (H6)
    0b00000000_01111110_00000001_00000001_00000001_00000001_00000001_00000000, // Square 48 (A7)
    0b00000000_01111100_00000010_00000010_00000010_00000010_00000010_00000000, // Square 49 (B7)
    0b00000000_01111010_00000100_00000100_00000100_00000100_00000100_00000000, // Square 50 (C7)
    0b00000000_01110110_00001000_00001000_00001000_00001000_00001000_00000000, // Square 51 (D7)
    0b00000000_01101110_00010000_00010000_00010000_00010000_00010000_00000000, // Square 52 (E7)
    0b00000000_01011110_00100000_00100000_00100000_00100000_00100000_00000000, // Square 53 (F7)
    0b00000000_00111110_01000000_01000000_01000000_01000000_01000000_00000000, // Square 54 (G7)
    0b00000000_01111110_10000000_10000000_10000000_10000000_10000000_00000000, // Square 55 (H7)
    0b01111110_00000001_00000001_00000001_00000001_00000001_00000001_00000000, // Square 56 (A8)
    0b01111100_00000010_00000010_00000010_00000010_00000010_00000010_00000000, // Square 57 (B8)
    0b01111010_00000100_00000100_00000100_00000100_00000100_00000100_00000000, // Square 58 (C8)
    0b01110110_00001000_00001000_00001000_00001000_00001000_00001000_00000000, // Square 59 (D8)
    0b01101110_00010000_00010000_00010000_00010000_00010000_00010000_00000000, // Square 60 (E8)
    0b01011110_00100000_00100000_00100000_00100000_00100000_00100000_00000000, // Square 61 (F8)
    0b00111110_01000000_01000000_01000000_01000000_01000000_01000000_00000000, // Square 62 (G8)
    0b01111110_10000000_10000000_10000000_10000000_10000000_10000000_00000000, // Square 63 (H8)
];

pub const PREMASKS_BISHOP: [u64; 64] = [
    0b00000000_01000000_00100000_00010000_00001000_00000100_00000010_00000000, // Square 0 (A1)
    0b00000000_00000000_01000000_00100000_00010000_00001000_00000100_00000000, // Square 1 (B1)
    0b00000000_00000000_00000000_01000000_00100000_00010000_00001010_00000000, // Square 2 (C1)
    0b00000000_00000000_00000000_00000000_01000000_00100010_00010100_00000000, // Square 3 (D1)
    0b00000000_00000000_00000000_00000000_00000010_01000100_00101000_00000000, // Square 4 (E1)
    0b00000000_00000000_00000000_00000010_00000100_00001000_01010000_00000000, // Square 5 (F1)
    0b00000000_00000000_00000010_00000100_00001000_00010000_00100000_00000000, // Square 6 (G1)
    0b00000000_00000010_00000100_00001000_00010000_00100000_01000000_00000000, // Square 7 (H1)
    0b00000000_00100000_00010000_00001000_00000100_00000010_00000000_00000000, // Square 8 (A2)
    0b00000000_01000000_00100000_00010000_00001000_00000100_00000000_00000000, // Square 9 (B2)
    0b00000000_00000000_01000000_00100000_00010000_00001010_00000000_00000000, // Square 10 (C2)
    0b00000000_00000000_00000000_01000000_00100010_00010100_00000000_00000000, // Square 11 (D2)
    0b00000000_00000000_00000000_00000010_01000100_00101000_00000000_00000000, // Square 12 (E2)
    0b00000000_00000000_00000010_00000100_00001000_01010000_00000000_00000000, // Square 13 (F2)
    0b00000000_00000010_00000100_00001000_00010000_00100000_00000000_00000000, // Square 14 (G2)
    0b00000000_00000100_00001000_00010000_00100000_01000000_00000000_00000000, // Square 15 (H2)
    0b00000000_00010000_00001000_00000100_00000010_00000000_00000010_00000000, // Square 16 (A3)
    0b00000000_00100000_00010000_00001000_00000100_00000000_00000100_00000000, // Square 17 (B3)
    0b00000000_01000000_00100000_00010000_00001010_00000000_00001010_00000000, // Square 18 (C3)
    0b00000000_00000000_01000000_00100010_00010100_00000000_00010100_00000000, // Square 19 (D3)
    0b00000000_00000000_00000010_01000100_00101000_00000000_00101000_00000000, // Square 20 (E3)
    0b00000000_00000010_00000100_00001000_01010000_00000000_01010000_00000000, // Square 21 (F3)
    0b00000000_00000100_00001000_00010000_00100000_00000000_00100000_00000000, // Square 22 (G3)
    0b00000000_00001000_00010000_00100000_01000000_00000000_01000000_00000000, // Square 23 (H3)
    0b00000000_00001000_00000100_00000010_00000000_00000010_00000100_00000000, // Square 24 (A4)
    0b00000000_00010000_00001000_00000100_00000000_00000100_00001000_00000000, // Square 25 (B4)
    0b00000000_00100000_00010000_00001010_00000000_00001010_00010000_00000000, // Square 26 (C4)
    0b00000000_01000000_00100010_00010100_00000000_00010100_00100010_00000000, // Square 27 (D4)
    0b00000000_00000010_01000100_00101000_00000000_00101000_01000100_00000000, // Square 28 (E4)
    0b00000000_00000100_00001000_01010000_00000000_01010000_00001000_00000000, // Square 29 (F4)
    0b00000000_00001000_00010000_00100000_00000000_00100000_00010000_00000000, // Square 30 (G4)
    0b00000000_00010000_00100000_01000000_00000000_01000000_00100000_00000000, // Square 31 (H4)
    0b00000000_00000100_00000010_00000000_00000010_00000100_00001000_00000000, // Square 32 (A5)
    0b00000000_00001000_00000100_00000000_00000100_00001000_00010000_00000000, // Square 33 (B5)
    0b00000000_00010000_00001010_00000000_00001010_00010000_00100000_00000000, // Square 34 (C5)
    0b00000000_00100010_00010100_00000000_00010100_00100010_01000000_00000000, // Square 35 (D5)
    0b00000000_01000100_00101000_00000000_00101000_01000100_00000010_00000000, // Square 36 (E5)
    0b00000000_00001000_01010000_00000000_01010000_00001000_00000100_00000000, // Square 37 (F5)
    0b00000000_00010000_00100000_00000000_00100000_00010000_00001000_00000000, // Square 38 (G5)
    0b00000000_00100000_01000000_00000000_01000000_00100000_00010000_00000000, // Square 39 (H5)
    0b00000000_00000010_00000000_00000010_00000100_00001000_00010000_00000000, // Square 40 (A6)
    0b00000000_00000100_00000000_00000100_00001000_00010000_00100000_00000000, // Square 41 (B6)
    0b00000000_00001010_00000000_00001010_00010000_00100000_01000000_00000000, // Square 42 (C6)
    0b00000000_00010100_00000000_00010100_00100010_01000000_00000000_00000000, // Square 43 (D6)
    0b00000000_00101000_00000000_00101000_01000100_00000010_00000000_00000000, // Square 44 (E6)
    0b00000000_01010000_00000000_01010000_00001000_00000100_00000010_00000000, // Square 45 (F6)
    0b00000000_00100000_00000000_00100000_00010000_00001000_00000100_00000000, // Square 46 (G6)
    0b00000000_01000000_00000000_01000000_00100000_00010000_00001000_00000000, // Square 47 (H6)
    0b00000000_00000000_00000010_00000100_00001000_00010000_00100000_00000000, // Square 48 (A7)
    0b00000000_00000000_00000100_00001000_00010000_00100000_01000000_00000000, // Square 49 (B7)
    0b00000000_00000000_00001010_00010000_00100000_01000000_00000000_00000000, // Square 50 (C7)
    0b00000000_00000000_00010100_00100010_01000000_00000000_00000000_00000000, // Square 51 (D7)
    0b00000000_00000000_00101000_01000100_00000010_00000000_00000000_00000000, // Square 52 (E7)
    0b00000000_00000000_01010000_00001000_00000100_00000010_00000000_00000000, // Square 53 (F7)
    0b00000000_00000000_00100000_00010000_00001000_00000100_00000010_00000000, // Square 54 (G7)
    0b00000000_00000000_01000000_00100000_00010000_00001000_00000100_00000000, // Square 55 (H7)
    0b00000000_00000010_00000100_00001000_00010000_00100000_01000000_00000000, // Square 56 (A8)
    0b00000000_00000100_00001000_00010000_00100000_01000000_00000000_00000000, // Square 57 (B8)
    0b00000000_00001010_00010000_00100000_01000000_00000000_00000000_00000000, // Square 58 (C8)
    0b00000000_00010100_00100010_01000000_00000000_00000000_00000000_00000000, // Square 59 (D8)
    0b00000000_00101000_01000100_00000010_00000000_00000000_00000000_00000000, // Square 60 (E8)
    0b00000000_01010000_00001000_00000100_00000010_00000000_00000000_00000000, // Square 61 (F8)
    0b00000000_00100000_00010000_00001000_00000100_00000010_00000000_00000000, // Square 62 (G8)
    0b00000000_01000000_00100000_00010000_00001000_00000100_00000010_00000000, // Square 63 (H8)
];

pub const KING_ATTACKS: [u64; 64] = [
    0b00000000_00000000_00000000_00000000_00000000_00000000_00000011_00000010, // Square 0 (A1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_00000111_00000101, // Square 1 (B1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_00001110_00001010, // Square 2 (C1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_00011100_00010100, // Square 3 (D1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_00111000_00101000, // Square 4 (E1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_01110000_01010000, // Square 5 (F1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_11100000_10100000, // Square 6 (G1)
    0b00000000_00000000_00000000_00000000_00000000_00000000_11000000_01000000, // Square 7 (H1)
    0b00000000_00000000_00000000_00000000_00000000_00000011_00000010_00000011, // Square 8 (A2)
    0b00000000_00000000_00000000_00000000_00000000_00000111_00000101_00000111, // Square 9 (B2)
    0b00000000_00000000_00000000_00000000_00000000_00001110_00001010_00001110, // Square 10 (C2)
    0b00000000_00000000_00000000_00000000_00000000_00011100_00010100_00011100, // Square 11 (D2)
    0b00000000_00000000_00000000_00000000_00000000_00111000_00101000_00111000, // Square 12 (E2)
    0b00000000_00000000_00000000_00000000_00000000_01110000_01010000_01110000, // Square 13 (F2)
    0b00000000_00000000_00000000_00000000_00000000_11100000_10100000_11100000, // Square 14 (G2)
    0b00000000_00000000_00000000_00000000_00000000_11000000_01000000_11000000, // Square 15 (H2)
    0b00000000_00000000_00000000_00000000_00000011_00000010_00000011_00000000, // Square 16 (A3)
    0b00000000_00000000_00000000_00000000_00000111_00000101_00000111_00000000, // Square 17 (B3)
    0b00000000_00000000_00000000_00000000_00001110_00001010_00001110_00000000, // Square 18 (C3)
    0b00000000_00000000_00000000_00000000_00011100_00010100_00011100_00000000, // Square 19 (D3)
    0b00000000_00000000_00000000_00000000_00111000_00101000_00111000_00000000, // Square 20 (E3)
    0b00000000_00000000_00000000_00000000_01110000_01010000_01110000_00000000, // Square 21 (F3)
    0b00000000_00000000_00000000_00000000_11100000_10100000_11100000_00000000, // Square 22 (G3)
    0b00000000_00000000_00000000_00000000_11000000_01000000_11000000_00000000, // Square 23 (H3)
    0b00000000_00000000_00000000_00000011_00000010_00000011_00000000_00000000, // Square 24 (A4)
    0b00000000_00000000_00000000_00000111_00000101_00000111_00000000_00000000, // Square 25 (B4)
    0b00000000_00000000_00000000_00001110_00001010_00001110_00000000_00000000, // Square 26 (C4)
    0b00000000_00000000_00000000_00011100_00010100_00011100_00000000_00000000, // Square 27 (D4)
    0b00000000_00000000_00000000_00111000_00101000_00111000_00000000_00000000, // Square 28 (E4)
    0b00000000_00000000_00000000_01110000_01010000_01110000_00000000_00000000, // Square 29 (F4)
    0b00000000_00000000_00000000_11100000_10100000_11100000_00000000_00000000, // Square 30 (G4)
    0b00000000_00000000_00000000_11000000_01000000_11000000_00000000_00000000, // Square 31 (H4)
    0b00000000_00000000_00000011_00000010_00000011_00000000_00000000_00000000, // Square 32 (A5)
    0b00000000_00000000_00000111_00000101_00000111_00000000_00000000_00000000, // Square 33 (B5)
    0b00000000_00000000_00001110_00001010_00001110_00000000_00000000_00000000, // Square 34 (C5)
    0b00000000_00000000_00011100_00010100_00011100_00000000_00000000_00000000, // Square 35 (D5)
    0b00000000_00000000_00111000_00101000_00111000_00000000_00000000_00000000, // Square 36 (E5)
    0b00000000_00000000_01110000_01010000_01110000_00000000_00000000_00000000, // Square 37 (F5)
    0b00000000_00000000_11100000_10100000_11100000_00000000_00000000_00000000, // Square 38 (G5)
    0b00000000_00000000_11000000_01000000_11000000_00000000_00000000_00000000, // Square 39 (H5)
    0b00000000_00000011_00000010_00000011_00000000_00000000_00000000_00000000, // Square 40 (A6)
    0b00000000_00000111_00000101_00000111_00000000_00000000_00000000_00000000, // Square 41 (B6)
    0b00000000_00001110_00001010_00001110_00000000_00000000_00000000_00000000, // Square 42 (C6)
    0b00000000_00011100_00010100_00011100_00000000_00000000_00000000_00000000, // Square 43 (D6)
    0b00000000_00111000_00101000_00111000_00000000_00000000_00000000_00000000, // Square 44 (E6)
    0b00000000_01110000_01010000_01110000_00000000_00000000_00000000_00000000, // Square 45 (F6)
    0b00000000_11100000_10100000_11100000_00000000_00000000_00000000_00000000, // Square 46 (G6)
    0b00000000_11000000_01000000_11000000_00000000_00000000_00000000_00000000, // Square 47 (H6)
    0b00000011_00000010_00000011_00000000_00000000_00000000_00000000_00000000, // Square 48 (A7)
    0b00000111_00000101_00000111_00000000_00000000_00000000_00000000_00000000, // Square 49 (B7)
    0b00001110_00001010_00001110_00000000_00000000_00000000_00000000_00000000, // Square 50 (C7)
    0b00011100_00010100_00011100_00000000_00000000_00000000_00000000_00000000, // Square 51 (D7)
    0b00111000_00101000_00111000_00000000_00000000_00000000_00000000_00000000, // Square 52 (E7)
    0b01110000_01010000_01110000_00000000_00000000_00000000_00000000_00000000, // Square 53 (F7)
    0b11100000_10100000_11100000_00000000_00000000_00000000_00000000_00000000, // Square 54 (G7)
    0b11000000_01000000_11000000_00000000_00000000_00000000_00000000_00000000, // Square 55 (H7)
    0b00000010_00000011_00000000_00000000_00000000_00000000_00000000_00000000, // Square 56 (A8)
    0b00000101_00000111_00000000_00000000_00000000_00000000_00000000_00000000, // Square 57 (B8)
    0b00001010_00001110_00000000_00000000_00000000_00000000_00000000_00000000, // Square 58 (C8)
    0b00010100_00011100_00000000_00000000_00000000_00000000_00000000_00000000, // Square 59 (D8)
    0b00101000_00111000_00000000_00000000_00000000_00000000_00000000_00000000, // Square 60 (E8)
    0b01010000_01110000_00000000_00000000_00000000_00000000_00000000_00000000, // Square 61 (F8)
    0b10100000_11100000_00000000_00000000_00000000_00000000_00000000_00000000, // Square 62 (G8)
    0b01000000_11000000_00000000_00000000_00000000_00000000_00000000_00000000, // Square 63 (H8)
];

pub const MAGICS_ROOK: [u64; 64] = [
    0b10001010_10000000_00010000_01000000_00000000_10000000_00000000_00100000, // Square 0 (A1)
    0b00000001_01000000_00000000_00100000_00000000_00010000_00000000_01000000, // Square 1 (B1)
    0b00000010_10000000_00011000_10000000_10100000_00000001_01110000_00000001, // Square 2 (C1)
    0b00000001_00000000_00001000_00010000_00000001_00000000_00000100_00100000, // Square 3 (D1)
    0b00000010_00000000_00000010_00000000_00010000_00001000_00000100_00100000, // Square 4 (E1)
    0b00000011_00000000_00011100_00000000_00000010_00000001_00000000_00001000, // Square 5 (F1)
    0b10000100_10000000_00000000_10000000_00000010_00000000_00000001_00000000, // Square 6 (G1)
    0b00100000_10000000_00001000_10000000_00000100_01000000_00101001_00000000, // Square 7 (H1)
    0b00000000_00000000_10000000_00000000_10011000_00100000_01000000_00000000, // Square 8 (A2)
    0b00100000_00100100_01000000_00010000_00000000_00100000_00000000_01000000, // Square 9 (B2)
    0b00000001_00000000_10000000_00100000_00000000_10000000_00010000_00000000, // Square 10 (C2)
    0b00000001_00100000_10000000_00001000_00000000_10000000_00010000_00000000, // Square 11 (D2)
    0b00000010_00001000_10000000_10000000_10001000_00000000_00000100_00000000, // Square 12 (E2)
    0b00000000_00000010_10000000_00100010_00000000_10000000_00000100_00000000, // Square 13 (F2)
    0b00100010_00000000_10000000_00000001_00000000_00000010_00000000_10000000, // Square 14 (G2)
    0b00001000_00000001_00000000_00000000_01100000_10000010_00010001_00000000, // Square 15 (H2)
    0b00000000_10000000_00000100_01000000_00000110_01000010_00100000_00000000, // Square 16 (A3)
    0b00000001_00000000_10000000_10000000_00100000_00000000_01000000_00000000, // Square 17 (B3)
    0b00010010_00010000_10001010_00000000_00010000_00100000_01000010_00000000, // Square 18 (C3)
    0b00000001_01000000_10000100_10000000_00010000_00000000_00001000_00000010, // Square 19 (D3)
    0b00000100_10000001_10000010_10000000_00010100_00000000_00101000_00000000, // Square 20 (E3)
    0b10000000_10010100_00000000_01000000_00000010_00000000_01000001_00000000, // Square 21 (F3)
    0b01000000_00010000_00000100_00000000_00010000_00000001_00001000_00000010, // Square 22 (G3)
    0b00000000_00000000_00000010_00000000_00001000_10000000_01100001_00000100, // Square 23 (H3)
    0b00000001_00000000_01000000_00000000_10000000_00100000_10000000_00000000, // Square 24 (A4)
    0b00100000_01000000_00000000_00100001_00100000_00001000_00010000_00000000, // Square 25 (B4)
    0b00000000_00100001_00100000_00000110_10000000_00010000_00000000_10000001, // Square 26 (C4)
    0b00000000_00100000_00010000_00000000_10000000_00001000_00000000_10000000, // Square 27 (D4)
    0b00000000_00000010_00000000_00001010_00000000_00100000_00000100_00010000, // Square 28 (E4)
    0b00000000_00000000_00000010_00000000_10000000_10000000_00000100_00000000, // Square 29 (F4)
    0b00000000_10000000_00001000_10000100_00000000_00010000_00000001_00000010, // Square 30 (G4)
    0b00000000_10000000_00000000_01000110_00000000_00000100_00101000_10000001, // Square 31 (H4)
    0b01000000_01000000_00000000_10000000_01000000_10000000_00000000_00100000, // Square 32 (A5)
    0b00000100_01000000_00000000_00110000_00000000_00100000_00001000_00000001, // Square 33 (B5)
    0b00000000_00000100_00100000_00000000_00010001_00000000_01000101_00000000, // Square 34 (C5)
    0b00000001_10001000_00000010_00000000_00010000_00010000_00000001_00000000, // Square 35 (D5)
    0b00000000_00010100_10000000_00000100_00000001_10000000_00101000_00000000, // Square 36 (E5)
    0b00100000_10000000_00000100_00000000_10000000_10000000_00000010_00000000, // Square 37 (F5)
    0b00000001_00100100_00001000_00000010_00000100_00000000_00010000_00000001, // Square 38 (G5)
    0b00000010_00000000_00000100_01100101_00000010_00000000_00000100_10000100, // Square 39 (H5)
    0b00000100_10000000_01000000_00000000_10000000_00001000_10000000_00100000, // Square 40 (A6)
    0b00010000_00000000_01000010_00100000_00010000_00000011_01000000_00000000, // Square 41 (B6)
    0b00000000_00110000_00100000_00000001_00000000_00010001_00000000_01000000, // Square 42 (C6)
    0b00000000_00000000_00010000_00000000_00100001_00000001_00000000_00001001, // Square 43 (D6)
    0b00100000_00000010_00001000_00000001_00000000_00010001_00000000_00000100, // Square 44 (E6)
    0b00000010_00000010_00000000_10000000_00000100_00000000_10000000_00000010, // Square 45 (F6)
    0b00000000_00100000_00000010_00000000_00000100_00000001_00000001_00000000, // Square 46 (G6)
    0b00100000_01001000_01000100_00000000_01000000_10000010_00000000_00000001, // Square 47 (H6)
    0b00000001_00000001_00000000_00100010_00000000_01000000_10000010_00000000, // Square 48 (A7)
    0b00000000_01000000_10000000_00100000_00000000_01000000_00010000_10000000, // Square 49 (B7)
    0b01000000_00001000_00010100_00100000_00000100_01000001_00000001_00000000, // Square 50 (C7)
    0b00000010_00000110_00001000_00100000_11000000_00010010_00000010_00000000, // Square 51 (D7)
    0b00000000_00000001_00000000_00010000_00000100_00001000_00000001_00000000, // Square 52 (E7)
    0b00000010_00001100_00000010_00000000_10000000_00000100_00000000_10000000, // Square 53 (F7)
    0b00101001_00110101_01100001_00001000_00110000_00000010_00100100_00000000, // Square 54 (G7)
    0b00000000_01000100_01000100_00000000_01000001_00000000_10010010_00000000, // Square 55 (H7)
    0b00000010_10000000_00000000_00010000_01000000_10000000_00100001_00000001, // Square 56 (A8)
    0b00100001_00000000_00011001_00000000_01000000_00000000_00100000_10000101, // Square 57 (B8)
    0b10000000_11000000_00001000_01000001_00000000_00010000_00100000_00000001, // Square 58 (C8)
    0b01000000_00100100_00001000_00010000_00000001_00000000_00000100_00100001, // Square 59 (D8)
    0b00000000_00000010_00000000_00110000_10100000_00100100_01001000_01110010, // Square 60 (E8)
    0b00000000_00010010_00000000_00010000_00001000_01000001_01000100_00000010, // Square 61 (F8)
    0b00000010_00000000_01100001_00000100_10010000_00001010_00001000_00000100, // Square 62 (G8)
    0b00000000_00000001_00000000_01000000_10000001_00000000_00100100_00000010, // Square 63 (H8)
];

pub const MAGICS_BISHOP: [u64; 64] = [
    0b00000000_01000000_00000100_00001000_01000100_01000000_01000000_10000100, // Square 0 (A1)
    0b00000000_00100000_00000100_00100000_10001010_00000000_01000010_00001000, // Square 1 (B1)
    0b00000000_00010000_00011001_00000000_01000001_00001000_00000010_00000010, // Square 2 (C1)
    0b00000001_00001000_00000110_00001000_01000101_00000100_00100000_00010000, // Square 3 (D1)
    0b00000101_10000001_00010000_01000001_10000000_10000000_00000010_00010000, // Square 4 (E1)
    0b00100001_00010010_00001000_00000100_01000110_00100000_00000000_00010000, // Square 5 (F1)
    0b00010000_10000000_10000010_00001000_00100000_00000110_00000010_00010000, // Square 6 (G1)
    0b00000011_11000000_10000000_10000100_00010000_00100010_00000010_00000000, // Square 7 (H1)
    0b00000000_00000100_00000101_00000100_00000100_01000100_00000100_00000100, // Square 8 (A2)
    0b00000000_00000000_00000010_00010000_00000001_01000010_00000000_10001000, // Square 9 (B2)
    0b00100100_11010000_00001000_00001000_00000001_00001000_00100001_00000010, // Square 10 (C2)
    0b00000000_00000001_00000010_00001010_00001010_00000010_00000100_00000000, // Square 11 (D2)
    0b00000000_00000000_00000100_00000011_00001000_00100000_00000100_00000010, // Square 12 (E2)
    0b00000000_00000100_00000001_00010000_00000010_00010000_00001000_00000000, // Square 13 (F2)
    0b00000100_00000001_01001000_01000001_00000100_00010000_01000000_00000101, // Square 14 (G2)
    0b00001000_00000001_00000001_00000100_00000010_00000010_00000010_00000000, // Square 15 (H2)
    0b00000000_01000000_00000010_00010000_11000011_10001000_00000001_00000000, // Square 16 (A3)
    0b00000100_00000100_00000010_00100000_00100100_00010000_10000010_00000000, // Square 17 (B3)
    0b00001000_00010000_00000001_10000010_00000000_00100000_01000001_00000010, // Square 18 (C3)
    0b00000000_00000100_00000000_00101000_00000001_10100000_00100000_00000011, // Square 19 (D3)
    0b00000000_10000101_00000100_00001000_00100000_00001000_00000100_00000000, // Square 20 (E3)
    0b10000001_00000001_00000010_11001000_00001000_10001000_00000100_00000000, // Square 21 (F3)
    0b00000000_00001110_10010000_00000100_00010000_10001000_01001000_00000000, // Square 22 (G3)
    0b10000000_00000010_00000010_00000100_10000000_10000100_00000001_00000010, // Square 23 (H3)
    0b00000010_00100000_00100000_00001000_01100101_00001001_00000010_00000001, // Square 24 (A4)
    0b00100000_00010000_00010000_00001010_00000010_00000010_00010010_00000010, // Square 25 (B4)
    0b00000001_01010010_00000100_10000100_00001000_00000010_00100100_00000001, // Square 26 (C4)
    0b00000000_00100000_00001000_00000000_00000010_00001000_00010001_00010000, // Square 27 (D4)
    0b01000000_00000001_00000000_00010000_00100001_00000000_01000000_00000000, // Square 28 (E4)
    0b10000000_00000000_01000000_01000000_00001010_00000001_00010000_00000010, // Square 29 (F4)
    0b00000000_11100100_00000000_01000000_10000001_00000001_00010000_00000010, // Square 30 (G4)
    0b00000000_00011100_00000000_01000000_00000001_00000001_00100000_10000000, // Square 31 (H4)
    0b10000000_00000100_00100000_00001001_01100010_10100000_00000010_00100000, // Square 32 (A5)
    0b10000100_00100010_00010000_00000010_00001000_01010000_00000010_00000010, // Square 33 (B5)
    0b00100000_00000000_01000000_00100010_00000000_00110000_00001100_00001000, // Square 34 (C5)
    0b10000110_01000110_00000010_00000000_10000000_00001000_00000000_10000000, // Square 35 (D5)
    0b10000000_00000010_00001010_00000010_00000000_00010000_00001000_00001000, // Square 36 (E5)
    0b00100000_00010000_00000000_01001000_10000000_00010001_00010000_00000000, // Square 37 (F5)
    0b01100010_00110000_00000000_10100000_10000000_00000001_00010100_00000000, // Square 38 (G5)
    0b01000010_00000000_10001100_00000011_01000000_00100000_10010010_00000010, // Square 39 (H5)
    0b00000010_00001001_00011000_10000010_01000000_00000000_00010000_00000000, // Square 40 (A6)
    0b01000000_00000100_00001000_10101000_10000100_00000000_00011000_00000000, // Square 41 (B6)
    0b00000000_00010001_00000100_00000000_10100110_00001000_00000100_00000000, // Square 42 (C6)
    0b00011000_01000000_00000110_00001010_01000100_00000010_00001000_00000000, // Square 43 (D6)
    0b00000000_10010000_00001000_00000001_00000100_00000000_00000000_01000001, // Square 44 (E6)
    0b00000010_00000001_00000001_00010000_00000000_10000000_10000001_00000001, // Square 45 (F6)
    0b00011010_00100010_00001000_00001000_00000101_00000100_11110000_10000000, // Square 46 (G6)
    0b10000000_00010010_00000010_00000110_00000000_00100001_00010010_00010010, // Square 47 (H6)
    0b00000101_00000000_10000110_00010000_00010001_00100100_00000000_00000000, // Square 48 (A7)
    0b00000001_10000000_10000000_01100001_00001000_00100000_00001000_00000000, // Square 49 (B7)
    0b01000000_00000000_00000010_00001110_00000001_00000100_00000000_01000100, // Square 50 (C7)
    0b00110000_00000000_00000000_00100110_00010000_01000100_00000000_00001010, // Square 51 (D7)
    0b00001000_00000010_00100100_00010001_00000010_00000010_00000000_00000010, // Square 52 (E7)
    0b00000000_00100000_10010000_01100000_01100001_00100001_00000000_00000001, // Square 53 (F7)
    0b01011010_10000100_10000100_00010000_00000100_00000001_00000011_00010000, // Square 54 (G7)
    0b00000000_00000100_00000001_00001000_00000001_00000001_00011100_00000100, // Square 55 (H7)
    0b00000000_00001010_00000001_00000001_00001001_01010000_00100010_00000000, // Square 56 (A8)
    0b00000000_00000000_00000000_01001010_00000010_00000001_00100000_00000000, // Square 57 (B8)
    0b01010000_00000010_00000001_00000001_00000000_10011000_10110000_00101000, // Square 58 (C8)
    0b10000000_01000000_00000000_00101000_00010001_00000100_00001001_00000000, // Square 59 (D8)
    0b00000000_00101000_00000000_00000000_00010000_00000010_00000010_00000100, // Square 60 (E8)
    0b00000110_00000000_00000000_00100000_00100000_00101101_00000010_01000000, // Square 61 (F8)
    0b10001001_00011000_10000100_01001000_01000010_00001000_00100010_00000000, // Square 62 (G8)
    0b01000000_00010000_00000001_00010000_00101001_00000010_00000000_00100000, // Square 63 (H8)
];

pub const RELEVANT_BITS_ROOK: [u8; 64] = [
    12, 11, 11, 11, 11, 11, 11, 12,
    11, 10, 10, 10, 10, 10, 10, 11,
    11, 10, 10, 10, 10, 10, 10, 11,
    11, 10, 10, 10, 10, 10, 10, 11,
    11, 10, 10, 10, 10, 10, 10, 11,
    11, 10, 10, 10, 10, 10, 10, 11,
    11, 10, 10, 10, 10, 10, 10, 11,
    12, 11, 11, 11, 11, 11, 11, 12,
];
pub const RELEVANT_BITS_BISHOP: [u8; 64] = [
    6, 5, 5, 5, 5, 5, 5, 6,
    5, 5, 5, 5, 5, 5, 5, 5,
    5, 5, 7, 7, 7, 7, 5, 5,
    5, 5, 7, 9, 9, 7, 5, 5,
    5, 5, 7, 9, 9, 7, 5, 5,
    5, 5, 7, 7, 7, 7, 5, 5,
    5, 5, 5, 5, 5, 5, 5, 5,
    6, 5, 5, 5, 5, 5, 5, 6,
];


static ROOK_ATTACKS: OnceLock<Box<[[u64; 4096]; 64]>> = OnceLock::new();
static BISHOP_ATTACKS: OnceLock<Box<[[u64; 512]; 64]>> = OnceLock::new();

fn calculate_rook_attacks_slowly(square: usize, blockers: u64) -> u64 {
    let mut attacks = 0_u64;
    let rank = square / 8;
    let file = square % 8;

    for r in (rank + 1)..=7 {
        let target_sq = r * 8 + file;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break; // Wir treffen einen Blocker, stopp
        }
    }

    for r in (0..rank).rev() {
        let target_sq = r * 8 + file;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
    }

    for f in (file + 1)..=7 {
        let target_sq = rank * 8 + f;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
    }

    for f in (0..file).rev() {
        let target_sq = rank * 8 + f;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
    }

    attacks
}

fn generate_final_rook_attacks() -> Box<[[u64; 4096]; 64]> {
    let mut v: Vec<[u64; 4096]> = Vec::with_capacity(64);
    for _ in 0..64 {
        v.push([0_u64; 4096]);
    }
    let mut final_rook_attacks: Box<[[u64; 4096]; 64]> = v.try_into().unwrap_or_else(|_| {
        panic!("Vec to Box conversion failed.");
    });

    for square_index in 0_usize..=63_usize {
        let premask = PREMASKS_ROOK[square_index];
        let magic = MAGICS_ROOK[square_index];
        let relevant_bits = RELEVANT_BITS_ROOK[square_index];
        let shift = 64 - relevant_bits;

        let mut blocker_combination = 0_u64;
        loop {
            let attack_squares = calculate_rook_attacks_slowly(square_index, blocker_combination);
            let magic_index = (blocker_combination.wrapping_mul(magic)) >> shift;
            let magic_index_as_usize = magic_index as usize;
            final_rook_attacks[square_index][magic_index_as_usize] = attack_squares;
            if blocker_combination == premask {
                break;
            }
            blocker_combination = blocker_combination.wrapping_sub(premask) & premask;
        }
    }

    final_rook_attacks
}

pub fn get_rook_attacks() -> &'static Box<[[u64; 4096]; 64]> {
    ROOK_ATTACKS.get_or_init(generate_final_rook_attacks)
}

fn calculate_bishop_attacks_slowly(square: usize, blockers: u64) -> u64 {
    let mut attacks = 0_u64;
    let rank = square / 8;
    let file = square % 8;

    let (mut r, mut f);

    r = rank + 1;
    f = file + 1;
    while r <= 7 && f <= 7 {
        let target_sq = r * 8 + f;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
        r += 1;
        f += 1;
    }

    r = rank;
    f = file + 1;
    while r > 0 && f <= 7 {
        r -= 1;
        let target_sq = r * 8 + f;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
        f += 1;
    }

    r = rank;
    f = file;
    while r > 0 && f > 0 { // r > 0 und f > 0
        r -= 1;
        f -= 1;
        let target_sq = r * 8 + f;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
    }

    r = rank + 1;
    f = file;
    while r <= 7 && f > 0 { // f > 0
        f -= 1;
        let target_sq = r * 8 + f;
        attacks |= 1_u64 << target_sq;
        if (blockers >> target_sq) & 1 == 1 {
            break;
        }
        r += 1;
    }

    attacks
}

fn generate_final_bishop_attacks() -> Box<[[u64; 512]; 64]> {
    let mut v: Vec<[u64; 512]> = Vec::with_capacity(64);
    for _ in 0..64 {
        v.push([0_u64; 512]);
    }
    let mut final_bishop_attacks: Box<[[u64; 512]; 64]> = v.try_into().unwrap_or_else(|_| {
        panic!("Vec to Box conversion failed for bishops.");
    });

    for square_index in 0_usize..=63_usize {
        let premask = PREMASKS_BISHOP[square_index];
        let magic = MAGICS_BISHOP[square_index];
        let relevant_bits = RELEVANT_BITS_BISHOP[square_index];
        let shift = 64 - relevant_bits;

        let mut blocker_combination = 0_u64;
        loop {
            let attack_squares = calculate_bishop_attacks_slowly(square_index, blocker_combination);

            let magic_index = (blocker_combination.wrapping_mul(magic)) >> shift;
            let magic_index_as_usize = magic_index as usize;

            final_bishop_attacks[square_index][magic_index_as_usize] = attack_squares;

            if blocker_combination == premask {
                break;
            }
            blocker_combination = blocker_combination.wrapping_sub(premask) & premask;
        }
    }

    final_bishop_attacks
}

pub fn get_bishop_attacks() -> &'static Box<[[u64; 512]; 64]> {
    BISHOP_ATTACKS.get_or_init(generate_final_bishop_attacks)
}